#!/bin/sh
#
# $FreeBSD: ports/devel/dbus/files/dbus.in,v 1.16 2010/05/10 21:18:03 kwm Exp $
#
# PROVIDE: dbus
# REQUIRE: DAEMON
#
# Add the following lines to /etc/rc.conf to enable the D-BUS messaging system:
#
# dbus_enable="YES"
#

. /etc/rc.subr
#. %%GNOME_SUBR%%

name="dbus"
rcvar="dbus_enable"

command="%%PREFIX%%/bin/dbus-daemon"
pidfile="/var/run/dbus/dbus.pid"

start_precmd="dbus_prestart"
stop_postcmd="dbus_poststop"

dbus_prestart()
{
    mkdir -p $(dirname $pidfile)
}

dbus_poststop()
{
    rm -f $pidfile
}

load_rc_config ${name}

: ${dbus_enable="NO"}
: ${dbus_flags="--system"}

run_rc_command "$1"
#EOF
