#!/bin/sh

set -x

case $2 in 
    PRE-INSTALL)

	OPENFIRE_GROUP="%%OPENFIRE_GROUP%%"
	OPENFIRE_OWNER="%%OPENFIRE_OWNER%%"

	OPENFIRE_GROUP_ID="%%OPENFIRE_GROUP_ID%%"
	OPENFIRE_OWNER_ID="%%OPENFIRE_OWNER_ID%%"

	PKG_PREFIX="%%PREFIX%%"
	OPENFIRE_LOGDIR="%%OPENFIRE_LOGDIR%%"
	OPENFIRE_DBDIR="%%OPENFIRE_DBDIR%%"
	OPENFIRE_ETCDIR="%%OPENFIRE_ETCDIR%%"

	OPENFIRE_NAME="openfire"
	OPENFIRE_SHELL="/bin/sh"
	OPENFIRE_HOME="%%HOME%%"

	pw group add ${OPENFIRE_GROUP}  -g ${OPENFIRE_GROUP_ID}
	pw group show ${OPENFIRE_GROUP}
	pw user add ${OPENFIRE_OWNER} -u ${OPENFIRE_OWNER_ID} \
	    -g ${OPENFIRE_GROUP}  \
	    -d ${OPENFIRE_HOME} \
	    -s "${OPENFIRE_SHELL}" -u ${OPENFIRE_OWNER_ID} \
	    -c "${OPENFIRE_NAME}"
	pw group mod ${OPENFIRE_GROUP} -M ${OPENFIRE_OWNER}
	pw user show ${OPENFIRE_OWNER}
	pw group show ${OPENFIRE_GROUP}
	install -d -o ${OPENFIRE_OWNER} -g ${OPENFIRE_GROUP} -m 0750 ${OPENFIRE_DBDIR}
	install -d -o ${OPENFIRE_OWNER} -g ${OPENFIRE_GROUP} -m 0750 ${OPENFIRE_LOGDIR}
	install -d -o ${OPENFIRE_OWNER} -g ${OPENFIRE_GROUP} -m 0750 ${OPENFIRE_ETCDIR}

	;;
    POST-INSTALL)
	;;
esac
exit 0
#EOF
