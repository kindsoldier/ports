#!/bin/sh

case $2 in 
    PRE-INSTALL)

	APP_GROUP="%%APP_GROUP%%"
	APP_OWNER="%%APP_OWNER%%"
	APP_GROUP_ID="%%APP_GROUP_ID%%"
	APP_OWNER_ID="%%APP_OWNER_ID%%"

	PKG_PREFIX="%%PREFIX%%"
	APP_RUNDIR="%%APP_RUNDIR%%"
	APP_LOGDIR="%%APP_LOGDIR%%"
	APP_DBDIR="%%APP_DBDIR%%"

	APP_NAME="vpnsw"
	APP_SHELL="/usr/sbin/nologin"

	pw group add ${APP_GROUP}  -g ${APP_GROUP_ID}
	pw user add ${APP_OWNER} -u ${APP_OWNER_ID} \
	    -g ${APP_GROUP}  \
	    -d ${PKG_PREFIX} \
	    -s "${APP_SHELL}" -u ${APP_OWNER_ID} \
	    -c "${APP_NAME}"
	pw group mod ${APP_GROUP} -M ${APP_OWNER}
	install -d -o ${APP_OWNER} -g ${APP_GROUP} -m 0750 ${APP_LOGDIR}
	install -d -o ${APP_OWNER} -g ${APP_GROUP} -m 0750 ${APP_RUNDIR}
	install -d -o ${APP_OWNER} -g ${APP_GROUP} -m 0750 ${APP_DBDIR}
	;;
    POST-INSTALL)
	;;
esac
exit 0
#EOF
