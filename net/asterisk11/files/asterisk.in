#!/bin/sh
#
# $FreeBSD: head/net/asterisk11/files/asterisk.in 316277 2013-04-22 21:11:34Z flo $
#

# PROVIDE: asterisk
# REQUIRE: LOGIN
# KEYWORD: shutdown
#
# Add the following lines to /etc/rc.conf to enable asterisk:
#
# asterisk_enable="YES"
#

. /etc/rc.subr

name=asterisk
rcvar="asterisk_enable"

extra_commands="reload"

stop_cmd="asterisk_stop"
reload_cmd="asterisk_reload"

command="%%PREFIX%%/sbin/asterisk"
command_args="-n -F -U %%ASTERISK_USER%%"


asterisk_stop() {
  echo 'Stopping asterisk'
  $command -nqrx 'core stop now'
}

asterisk_reload() {
  echo 'Reloading asterisk'
  $command -nqrx 'reload'
}

: ${asterisk_enable="NO"}
: ${asterisk_pidfile="/var/run/asterisk/asterisk.pid"}


load_rc_config $name

run_rc_command "$1"
#EOF
