#!/bin/sh

set -x

case $2 in 
    PRE-INSTALL)

	PDNS_GROUP="%%PDNS_GROUP%%"
	PDNS_OWNER="%%PDNS_OWNER%%"
	PDNS_GROUP_ID="%%PDNS_GROUP_ID%%"
	PDNS_OWNER_ID="%%PDNS_OWNER_ID%%"

	PKG_PREFIX="%%PREFIX%%"
	PDNS_NAME="powerdns"
	PDNS_SHELL="/usr/sbin/nologin"


	pw group add ${PDNS_GROUP}  -g ${PDNS_GROUP_ID}
	pw group show ${PDNS_GROUP}
	pw user add ${PDNS_OWNER} -u ${PDNS_OWNER_ID} \
	    -g ${PDNS_GROUP}  \
	    -d ${PKG_PREFIX} \
	    -s "${PDNS_SHELL}" -u ${PDNS_OWNER_ID} \
	    -c "${PDNS_NAME}"
	pw group mod ${PDNS_GROUP} -M ${PDNS_OWNER}
	pw user show ${PDNS_OWNER}
	pw group show ${PDNS_GROUP}
#	for dir in ${PDNS_LOGDIR} ${PDNS_RUNDIR}; do
#	    install -d -o ${PDNS_OWNER} -g ${PDNS_GROUP} -m 0750 ${dir}
#	done
#	install -d -o root -g wheel -m 0755 ${PDNS_DATADIR}
	;;
    POST-INSTALL)
	;;
esac
exit 0
#EOF
