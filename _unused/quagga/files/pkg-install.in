#!/bin/sh

set -x

QUAGGA_OWNER="%%QUAGGA_OWNER%%"
QUAGGA_GROUP="%%QUAGGA_GROUP%%"
QUAGGA_OWNER_ID="%%QUAGGA_OWNER_ID%%"
QUAGGA_GROUP_ID="%%QUAGGA_GROUP_ID%%"

RUN_DIR="%%RUN_DIR%%"
LOG_DIR="%%LOG_DIR%%"
CONF_DIR="%%CONF_DIR%%"

PKG_PREFIX="/notexist"

case $2 in 
    PRE-INSTALL)
	pw group add ${QUAGGA_GROUP} -g ${QUAGGA_GROUP_ID} 
	pw user add ${QUAGGA_OWNER}  -g ${QUAGGA_GROUP} \
	    -d ${PKG_PREFIX} -s /usr/sbin/nologin -u ${QUAGGA_OWNER_ID} \
	    -c "quagga"
	pw group mod ${QUAGGA_GROUP} -M ${QUAGGA_OWNER}
	pw group show ${QUAGGA_GROUP}
	pw user show ${QUAGGA_OWNER}
	mkdir -p ${RUN_DIR} 
	chown ${QUAGGA_OWNER}:${QUAGGA_GROUP} ${RUN_DIR} 
	chmod 0750 ${RUN_DIR} 

	mkdir -p ${LOG_DIR} 
	chown ${QUAGGA_OWNER}:${QUAGGA_GROUP} ${LOG_DIR} 
	chmod 0750 ${LOG_DIR} 

	mkdir -p ${CONF_DIR} 
	chown ${QUAGGA_OWNER}:${QUAGGA_GROUP} ${CONF_DIR} 
	chmod 0750 ${CONF_DIR} 
	;;
    POST-INSTALL)
	;;
esac
#EOF
