#!/bin/sh -x

CACTI_GROUP="%%CACTI_GROUP%%"
CACTI_OWNER="%%CACTI_OWNER%%"
CACTI_GROUP_ID="%%CACTI_GROUP_ID%%"
CACTI_OWNER_ID="%%CACTI_OWNER_ID%%"
CACTI_DBDIR="%%CACTI_DBDIR%%"
CACTI_LOGDIR="%%CACTI_LOGDIR%%"

PKG_PREFIX="/notexist"

case $2 in 
    PRE-INSTALL)
	pw group add ${CACTI_GROUP}  -g ${CACTI_GROUP_ID}

	pw user add ${CACTI_OWNER} -g ${CACTI_GROUP}  \
	    -d ${PKG_PREFIX} -s /usr/sbin/nologin -u ${CACTI_OWNER_ID} \
	    -c "cacti"

	pw group mod ${CACTI_GROUP} -M ${CACTI_OWNER}

	pw group show ${CACTI_GROUP}
	pw user show ${CACTI_OWNER}

	for dir in ${CACTI_DBDIR}/rra ${CACTI_DBDIR}/scripts;
	do
	    mkdir -p ${dir}
	    chown ${CACTI_OWNER}:${CACTI_GROUP} ${dir}
	    chmod 0755 ${dir}
	done

	for dir in ${CACTI_LOGDIR} ;
	do
	    mkdir -p ${dir}
	    chown ${CACTI_OWNER}:${CACTI_GROUP} ${dir}
	    chmod 0750 ${dir}
	done
	;;
    POST-INSTALL)
	;;
esac
#EOF
